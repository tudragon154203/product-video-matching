refactor before writing tests and ensure tests are run after written.

minimal test cases. Focus on building more than testing.