[pytest]
asyncio_mode = auto
addopts = --doctest-modules --strict-markers -n 1 --cov=tests --cov-report=term-missing --cov-report=html:htmlcov --cov-report=xml
norecursedirs = .git .pytest_cache .tox venv *.egg dist build model_cache
markers =
    unit: Mark a test as a unit test.
    integration: Mark a test as an integration test.
    contract: Mark a test as a contract test.
    collection_phase: Mark a test as a collection phase integration test.
    observability: Mark a test as an observability validation test.
    performance: Mark a test as a performance benchmark test.
    slow: Mark a test as a slow-running test.
    ci: Mark a test that should run in CI environment.
    local: Mark a test that should run locally only.
    idempotency: Mark a test that validates idempotency behavior.
env_override_existing_values = 1
env_files =
    ../../infra/pvm/.env
    ../.env.test
timeout = 900
timeout_method = thread